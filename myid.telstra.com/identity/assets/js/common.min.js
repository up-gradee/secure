var serverError=!1;function validateField(e,t,s,r,a,n){let i=!0;var o=document.getElementById(e).value;let d="",l="";return document.querySelector("[data-new-password]")&&document.querySelector("[data-new-password]").setAttribute("data-new-password","true"),""===o?(d=validMessages.Required_Field,"username"==e?(d=validMessages.Required_Username,l=validMessages.Required_Username_Top):"password"==e?(d=validMessages.Required_Password,l=validMessages.Required_Password_Top):"new-password"==e?(d=validMessages.Required_NewPassword,l=validMessages.Required_NewPassword_Top):"re-enter-password"==e&&(d=validMessages.Required_ReEnterPassword,l=validMessages.Required_ReEnterPassword_Top),i=!1):"username"!=e||/^[A-Za-z0-9._&+'-]+(@[A-Za-z0-9-]+(?:\.[A-Za-z0-9-]+)*)?$/.test(o)?"newPasscode"!==e||pinValidCheck(o,a)?"confirmPasscode"===e?document.getElementById("newPasscode")&&0<document.getElementById("newPasscode").value.length&&document.getElementById("newPasscode").value!==o&&(d=validMessages.PINs_Not_Match,i=!1):a&&0<a&&o.length!=a||n&&"numeric"===n&&!numericCheck(o)?(d="passcode"===e?validMessages.InValid_PIN:validMessages.InValid_Code,i=!1):n&&"date"===n&&!dateValidCheck(o,e)?(d="Invalid date.",i=!1):"new-password"===e?(PasswordValidCheck(o,s)?o.match(/^[ -~]+$/)?0!==o.indexOf(" ")&&o.lastIndexOf(" ")!==o.length-1||(d=validMessages.InValid_Password_Space,i=!1):(d=validMessages.InValid_Password_Special,i=!1):(d=validMessages.InValid_Password,i=!1),(a=document.getElementById("re-enter-password"))&&""!==a.value&&a.value!==o&&confirmPassword(o,a.value)):"re-enter-password"===e&&(n=document.getElementById("new-password"),d=validMessages.Password_Not_Match,n)&&""!==n.value&&n.value!==o&&(i=confirmPassword(o,n.value)):(d=validMessages.InValid_PIN_Create,i=!1):(d=validMessages.Invalid_Username,l=validMessages.Invalid_Username_Top,i=!1),i?(document.getElementById(e).setAttribute("aria-invalid","false"),document.getElementById(e).setAttribute("aria-describedby",""),document.querySelector("["+e+"-error]")?.setAttribute(e+"-error","false"),document.querySelector("[common-error]")?.setAttribute("common-error","false")):(document.getElementById(e).setAttribute("aria-invalid","true"),document.getElementById(e).setAttribute("aria-describedby",t),document.querySelector("["+e+"-error]")?.setAttribute(e+"-error","true"),document.getElementById(t).innerHTML=s?`<svg class="able-icon" role="img" aria-label="Error" focusable="false">
              <use href="./assets/able-sprites.svg?v8#Error"></use></svg> `+d:d,document.querySelector("[common-error]")?.setAttribute("common-error","true"),document.getElementById("common-error-text")&&(document.getElementById("common-error-text").innerHTML=l),document.querySelector("[server-password-error]")&&document.querySelector("[server-password-error]").setAttribute("server-password-error","false"),r||document.getElementById(e).focus(),"username"==e||"password"==e?loadAnalyticEvents("impression","alert","fail",d):loadAnalyticEvents("error","validation","",d)),i}function validateCompareFields(e,t,s){let r=!0,a=!0,n=!0,i="",o="";var d=document.getElementById(e),l=document.getElementById(t),c=e+"-error-text",t=t+"-error-text";return""===l.value&&""===d.value?(d.focus(),a=!1,n=!1,i=validMessages.Required_Field,o=validMessages.Required_Field):""===l.value&&""!==d.value?(o=validMessages.Required_Field,n=!1,("newPasscode"!==e||pinValidCheck(d.value,s)?"new-password"!==e||PasswordValidCheck(d.value)?l:(i=validMessages.InValid_Password,a=!1,d):(i=validMessages.InValid_PIN_Create,a=!1,d)).focus()):""!==l.value&&""!==d.value?(l.value!==d.value&&("new-password"===e?o=validMessages.Password_Not_Match:"newPasscode"===e&&(o=validMessages.PINs_Not_Match),n=!1,l.focus()),"newPasscode"!==e||pinValidCheck(d.value,s)?"new-password"!==e||PasswordValidCheck(d.value)||(i=validMessages.InValid_Password,a=!1,d.focus()):(i=validMessages.InValid_PIN_Create,a=!1,d.focus())):""===d.value&&(i=validMessages.Required_Field,d.focus(),a=!1),a?(d.setAttribute("aria-invalid","false"),d.setAttribute("aria-describedby",""),document.getElementById(c).innerHTML=`<svg class="able-icon" role="img" aria-label="Error" focusable="false">
	            <use href="./assets/able-sprites.svg?v8#Error"></use>
	        </svg> `+i):(d.setAttribute("aria-invalid","true"),d.setAttribute("aria-describedby",c),document.getElementById(c).innerHTML=`<svg class="able-icon" role="img" aria-label="Error" focusable="false">
	            <use href="./assets/able-sprites.svg?v8#Error"></use>
	        </svg> `+i,loadAnalyticEvents("error","validation","",i),r=!1),n?(l.setAttribute("aria-invalid","false"),l.setAttribute("aria-describedby",""),document.getElementById(t).innerHTML=`<svg class="able-icon" role="img" aria-label="Error" focusable="false">
	            <use href="./assets/able-sprites.svg?v8#Error"></use>
	        </svg> `+o):(l.setAttribute("aria-invalid","true"),l.setAttribute("aria-describedby",t),document.getElementById(t).innerHTML=`<svg class="able-icon" role="img" aria-label="Error" focusable="false">
	            <use href="./assets/able-sprites.svg?v8#Error"></use>
	        </svg> `+o,loadAnalyticEvents("error","validation","",o),r=!1),r}function confirmPassword(e,t){var s="re-enter-password-error-text",r="re-enter-password";return e===t?(document.getElementById(r)?.setAttribute("aria-invalid","false"),document.getElementById(r)?.setAttribute("aria-describedby",""),document.querySelector("["+r+"-error]")?.setAttribute(r+"-error","false"),!0):(document.getElementById(r).setAttribute("aria-invalid","true"),document.getElementById(r).setAttribute("aria-describedby",s),document.querySelector("["+r+"-error]").setAttribute(r+"-error","true"),document.getElementById(s).innerHTML=validMessages.Password_Not_Match,!1)}function numericCheck(e){return!!new RegExp("^[0-9]+$").test(e)}function handleOnblurEvent(s,r){if("true"==s.target.getAttribute("aria-invalid")&&0==serverError){var a=s.target.id+"-error-text";let e=0,t="String";"passcode"==s.target.id?(e=4,t="numeric"):"otp"==s.target.id?(e=6,t="numeric"):"dob"==s.target.id&&(t="date"),validateField(s.target.id,a,r,!0,e,t)}}function dateValidCheck(e,t){var s,r,a=new Date,n=(a.setHours(0,0,0,0),[31,28,31,30,31,30,31,31,30,31,30,31]);let i=!0;return i=0===e.length||!/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(e)||(e=e.split("/"),s=parseInt(e[0]),r=parseInt(e[1]),((e=parseInt(e[2]))%4||!(e%100))&&e%400||(n[1]=29),s<1)||n[r-1]<s||r<1||12<r||"dob"===t&&(!(1900<e&&e<=a.getFullYear())||a<new Date(e,r-1,s))?!1:i}function pinValidCheck(e,t){return!!numericCheck(e)&&!(t&&0<t&&e.length!=t||parseInt(e[0])===parseInt(e[1])&&parseInt(e[1])===parseInt(e[2])&&parseInt(e[2])===parseInt(e[3])||parseInt(e[0])+1===parseInt(e[1])&&parseInt(e[1])+1===parseInt(e[2])&&parseInt(e[2])+1===parseInt(e[3])||parseInt(e[0])-1===parseInt(e[1])&&parseInt(e[1])-1===parseInt(e[2])&&parseInt(e[2])-1===parseInt(e[3])||"7890"===e)}function PasswordValidCheck(e,t=!0){let s=0,r=!0,a,n,i,o,d,l,c,u,m,g,v,b,p,I,y,h;var f,E;return t?(a=document.getElementById("ps1_success"),n=document.getElementById("ps2_success"),i=document.getElementById("ps3_success"),o=document.getElementById("ps4_success"),d=document.getElementById("ps1_error"),l=document.getElementById("ps2_error"),c=document.getElementById("ps3_error"),u=document.getElementById("ps4_error")):(m=document.getElementById("ps1_i"),g=document.getElementById("ps2_i"),v=document.getElementById("ps3_i"),b=document.getElementById("ps4_i"),p=document.getElementById("ps1"),I=document.getElementById("ps2"),y=document.getElementById("ps3"),h=document.getElementById("ps4")),r=e&&""!==e.trim()?(f=JSON.parse(sessionStorage.getItem("enable_hibp_check")),E=JSON.parse(sessionStorage.getItem("hibp_api_failed")),(f&&E||!f)&&(/[a-z]/.test(e)?(s=1,t?(d.classList.add("t-icon--hidden"),a.classList.remove("t-icon--hidden")):(p.classList.add("ok"),m.setAttribute("aria-label","Passed"))):(s=0,t?(d.classList.remove("t-icon--hidden"),a.classList.add("t-icon--hidden")):(m.setAttribute("aria-label","Not Passed"),p.classList.contains("ok")&&p.classList.remove("ok"))),/[A-Z]/.test(e)?(s+=1,t?(l.classList.add("t-icon--hidden"),n.classList.remove("t-icon--hidden")):(I.classList.add("ok"),g.setAttribute("aria-label","Passed"))):(s=0,t?(l.classList.remove("t-icon--hidden"),n.classList.add("t-icon--hidden")):(g.setAttribute("aria-label","Not Passed"),I.classList.contains("ok")&&I.classList.remove("ok"))),/\d/.test(e)?(s+=1,t?(c.classList.add("t-icon--hidden"),i.classList.remove("t-icon--hidden")):(y.classList.add("ok"),v.setAttribute("aria-label","Passed"))):(s=0,t?(c.classList.remove("t-icon--hidden"),i.classList.add("t-icon--hidden")):(v.setAttribute("aria-label","Not Passed"),y.classList.contains("ok")&&y.classList.remove("ok")))),10<=e.length&&e.length<=64?(s+=1,t?(u.classList.add("t-icon--hidden"),o.classList.remove("t-icon--hidden")):(h.classList.add("ok"),b.setAttribute("aria-label","Passed"))):(s=0,t?(u.classList.remove("t-icon--hidden"),o.classList.add("t-icon--hidden")):(b.setAttribute("aria-label","Not Passed"),h.classList.contains("ok")&&h.classList.remove("ok"))),!((f&&!E||4!==s)&&(!f||E||1!==s))):(t||(p.classList.contains("ok")&&p.classList.remove("ok"),I.classList.contains("ok")&&I.classList.remove("ok"),y.classList.contains("ok")&&y.classList.remove("ok"),h.classList.contains("ok")&&h.classList.remove("ok"),m.setAttribute("aria-label","Not Passed"),g.setAttribute("aria-label","Not Passed"),v.setAttribute("aria-label","Not Passed"),b.setAttribute("aria-label","Not Passed")),!1)}function showHide(e,t,s,r,a){"show"===e?(document.getElementById(t).classList.add(a),document.getElementById(s).classList.remove(a),document.getElementById(r).type="text"):(document.getElementById(s).classList.remove(a),document.getElementById(t).classList.add(a),document.getElementById(r).type="password"),document.getElementById(s).focus()}function showHidePwd(e,t,s){t=document.getElementById(t),s=document.getElementById(s);"Show"===e.innerText?(t.innerText="Hide",s.type="text"):(t.innerText="Show",s.type="password")}function setCookie(e,t,s){deleteCookie(e);let r="";var a;s&&((a=new Date).setTime(a.getTime()+24*s*60*60*1e3),r="; expires="+a.toUTCString()),document.cookie=e+"="+(t||"")+r+"; path=/"}function getCookie(e){var s=e+"=",r=document.cookie.split(";");for(let t=0;t<r.length;t++){let e=r[t];for(;" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(s))return e.substring(s.length,e.length)}return null}function deleteCookie(e){var t=new Date;t.setDate(t.getDate()-30),expires="; expires="+t.toUTCString(),document.cookie=e+"="+expires+"; path=/"}function cookieToElement(e){let t=getCookie(e.getAttribute("data-t-cookie-name"));var s=e.getAttribute("data-t-cookie-value-in-attribute");return s?("href"!=s&&"src"!=s||(t=t.replace(/^(?!https:\/\/|myt:|myboost:|jbhifi:).*/,"XXXXXX")),e.setAttribute(s,t)):e.innerText=t}var cookieElements=document.querySelectorAll("[data-t-cookie-name]");for(let e=0;e<cookieElements.length;e++)cookieToElement(cookieElements[e]);function setRememberUn(){deleteCookie("t_signed_out"),deleteCookie("t_username");var e=getCookie("remember_un"),t=getCookie("first_un"),t=(e&&t?(document.getElementById("rememberUsername").checked=!0,"undefined"!=t&&(document.getElementById("username").value=t,document.getElementById("modUsername").value=t)):document.getElementById("rememberUsername").checked=!!e,getCookie("id_first_username"));t&&"undefined"!=t&&(document.getElementById("username").value=t,document.getElementById("modUsername").value=t,deleteCookie("id_first_username"))}function setRequiredCookies(){var e=document.getElementById("username").value.trim();setCookie("id_first_username",document.getElementById("modUsername").value=e),1==document.getElementById("rememberUsername").checked?setCookie("remember_un",!0,90):(deleteCookie("remember_un"),deleteCookie("first_un"))}function removeDomainFromUsername(e){var t="",e=(t=document.getElementById(e).value.trim()).substring(0,t.lastIndexOf("@")),s=t.substring(t.lastIndexOf("@")+1);-1<["telstra.com","telstra.com.au","bigpond.com","bigpond.com.au"].indexOf(s.trim().toLowerCase())?document.getElementById("modUsername").value=e:document.getElementById("modUsername").value=t}function recaptchaValidation(t){let s="",r="",a=!0;if("serviceNow"!==t&&(s=document.getElementById("recaptcha-validation-msg"),r=document.getElementById("recaptcha")),document.querySelector(".t-recaptcha")){let e="";grecaptcha&&0===grecaptcha.getResponse().length?("serviceNow"===t?(e="Please confirm you're not a robot",document.getElementById("recaptcha-error-text").setAttribute("aria-invalid","true"),document.getElementById("recaptcha-error-text").innerHTML=`<svg class="able-icon" role="img" aria-label="Error" focusable="false">
                  <use href="./assets/able-sprites.svg?v8#Error"></use></svg> `+e):s.classList.contains("t-icon--hidden")&&(s.classList.remove("t-icon--hidden"),r.setAttribute("aria-invalid","true")),a=!1):"serviceNow"===t?(e="",document.getElementById("recaptcha-error-text").setAttribute("aria-invalid","false"),document.getElementById("recaptcha-error-text").innerHTML=e):s.classList.contains("t-icon--hidden")||(s.classList.add("t-icon--hidden"),r.setAttribute("aria-invalid","false"))}return a}function getShortenedUsername(e){let t=e.substring(0,e.lastIndexOf("@")),s=e.substring(e.lastIndexOf("@")+1),r=e;return r=(15<s.length?(t=t.length<10?t.substring(0,10):t.substring(0,9)+"...",s="..."+s.substring(s.length-15,s.length)):10<s.length&&15<t.length?t=t.substring(0,12)+"...":9<t.length&&(t=t.substring(0,8)+"..."),t+"@"+s)}function arrayToString(e){return String.fromCharCode(...new Uint8Array(e))}function stringToBase64(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function arrayToBase64(e){return stringToBase64(arrayToString(e))}function base64ToArray(e){return Uint8Array.from(atob(e.replace(/_/g,"/").replace(/-/g,"+")),e=>e.codePointAt(0))}function updateUrlWithParms(e,t,s){var r=new URL(e.action);r.searchParams.set(t,s),e.action=r.href}async function passkeySupportCheck(){let e="no";return e=window.PublicKeyCredential&&(e="pub",await window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable())?"plfm":e}
